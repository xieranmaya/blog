<div class="coord">
<script>
  // z = f(x,y) = sin(x) + cos(y)
  // 
  var f = (x,y) => (2*Math.sin(Math.sqrt(x*x + y*y)) + 0*Math.cos(y))///Math.sqrt(x*x + y*y)*3
  f = (x,y) => (x*x + Math.abs(x*y) + y*y)/20
  f = (x,y) => 2 * Math.sin(Math.sqrt(x*x+y*y))
  f = (x,y) => Math.sqrt(100 - x*x-y*y)
  var ff = (x,y) => -Math.sqrt(100 - x*x-y*y)

  var start = -6
  var end = 6
  var step = 0.25
  var factor = 40
  var z
  var d = 0.00000001
  for(var x = start; x <= end; x += step) {
    for(var y = start; y <= end ;y += step) {
      for (var z = start; z <= end; z+= step) {
        if (Math.abs(x) + Math.abs(y) <= 2 && Math.abs(z) + Math.abs(y) <= 2 && Math.abs(x) + Math.abs(z) <= 2) {
        // if (Math.abs(x) + Math.abs(y) <= 2 && Math.abs(z) <= 1) {

          document.write(`
            <i style="transform:
              translate3d(${x*factor}px,${y*factor}px,${z*factor}px) scale(2);
              background-color: hsl(${z*150},70%,50%);"></i>
            `)
              // rotateX(${Math.random() < 0.5 ? 90 : 0}deg) rotateY(${Math.random() < 0.5 ? 90 : 0}deg);
        }
      }
    }
  }
</script>
</div>

<style>
  div.coord {
    width: 1000px;
    height: 1000px;
    /*margin: auto;*/
    /*margin-top: 200px;*/
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    /*background-color: rgba(0,0,0,0.3);*/
    xtransform: perspective(1000px) rotateX(0deg) rotateZ(0deg);
    xtransition: 3s linear;
    transform-style: preserve-3d;
    animation: spin3d 60s infinite linear;
    background-image: linear-gradient(to bottom, transparent 49%, red 49%, red 51%, transparent 51%), linear-gradient(to left, transparent 49%, black 49%, black 51%, transparent 51%);
  }
  div::before {
    content: '';
    width: 1000px;
    height: 1000px;
    position: absolute;
    left: 0;
    top: 0;
    transform: rotateX(90deg);
    background-image: linear-gradient(to left, transparent 49%, brown 49%, brown 51%, transparent 51%);
  }
  div:hover {
    animation-play-state: paused;
    xtransform: perspective(1000px) rotateX(150deg) rotateZ(400deg);
  }
  i {
    width: 5px;
    height: 5px;
    background-color: red;
    position: absolute;
    top: 50%;
    left: 50%;
    transform-style: preserve-3d;
  }
  i::before,i::after {
    /* content: ''; */
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: inherit;
  }
  i::before {
    transform: rotatex(90deg);
  }
  i::after {
    transform: rotatey(90deg);
  }
  @keyframes spin3d {
    from {
      transform: perspective(1000px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);
    }
    to {
      
      transform: perspective(1000px) rotateX(720deg) rotateY(720deg) rotateZ(720deg);
    }
  }
</style>
